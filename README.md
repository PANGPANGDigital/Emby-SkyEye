# **Emby-SkyEye（基于 ChatGPT 编写 个人自用）**

Emby 播放行为实时监控面板（多地异常检测 / 历史记录可视化 / Web 可配置）

自建 Emby 的用户常常遇到：“账号是否被共享？”、“是否存在盗号滥用？”、“某个用户为什么经常异地播放？” 等问题。
本项目通过可视化 Web 控制面板，实时展示 Emby 服务器的播放会话，并提供自动化行为分析。

特点：无需修改 Emby 本体，无插件入侵，纯 API 读取，轻量安全。

⸻

✨ 项目特性

🔍 实时播放监控
	•	自动查询 Emby 当前所有播放会话
	•	展示：用户、标题、进度条、状态、设备、客户端、IP
	•	自动过滤 Stopped 会话，只显示正在播放或暂停的用户
	•	数据自动轮询更新（可配置）

⸻

🛰 智能「多地」行为分析

实时计算是否存在账号异常共享行为：
	1.	同一时间段多个公网 IP 播放 → 多地
	2.	72 小时内公网 IP 变动次数 ≥ 5 → 多地
	3.	72 小时内公网 IP 段 + 设备类型 + 客户端 多次同时变动 → 多地

多地标记基于最近 72 小时的行为自动更新，超过时间会自然“冷却”消失。
你无需手动干预。

⸻

🕒 历史播放记录
	•	查询指定用户 / 全部用户的历史播放行为
	•	展示：时间、用户、标题、状态、设备、IP
	•	能作为多地判断的辅助数据
	•	点击可加载更多历史记录

⸻

⚙️ Web 控制面板可配置

内置前端界面，可以直接设置：
	•	Emby 地址
	•	API Token
	•	轮询间隔
	•	Token 自动加密展示（只显示头 3 位和尾 3 位，保护隐私）

⸻

🚀 完全 Docker 化
	•	完整封装 FastAPI + httpx + SQLite + 前端界面
	•	适配：
	•	群晖 Synology Container Manager
	•	Portainer
	•	Linux Docker / Compose
	•	任何支持 Docker 的环境

无需依赖系统 Python，不污染宿主机。

⸻

🧠 轻量数据库
	•	使用 SQLite 存储配置与历史播放数据
	•	单文件，体积小（通常 < 1MB）
	•	自动读写，无需人工维护

⸻

🖼 页面预览
![仪表盘](https://raw.githubusercontent.com/PANGPANGDigital/Emby-SkyEye/main/image/Emby-SkyEye.png)

🧪 配置 Emby

打开 Emby 后台 →
控制台 → 高级 → API 密钥 → 新建密钥 → 复制 Token
然后将 Token 填写进面板即可开始监控。
